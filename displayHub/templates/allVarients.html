{% extends "adminBase.html" %}

{% load static %}

{% block adminContents %}
  <main id="main" class="main">
    <section class="section">
      <div class="row">
        <div class="col-lg-12">
          <h5>All Variants</h5>
          <button class="btn btn-outline-success mb-3">
            <a class="text-success" href="{% url 'addVarient' vId %}">Add Variants</a>
          </button>
          <input type="text" id="searchVarients" class="form-control" placeholder="Search Variants By Price" onkeyup="filterProduct()">
          <table class="table table-bordered mt-3">
            <thead>
              <tr>
                <th>Image</th>
                <th>Price</th>
                <th>Size</th>
                <th>Refresh Rate</th>
                <th>Stock</th>
                <th>Edit</th>
              </tr>
            </thead>
            <tbody id="varientsTable">
              {% for varient in varients %}
              <tr>
                <td><img src="{{ varient.product.image1.url }}" alt="" style="width: 130px; height: 130px;"></td>
                <td>â‚¹ {{ varient.price }}</td>
                <td>{{ varient.size.size }} Inch</td>
                <td>{{ varient.refreshRate.refreshRate }} Hz</td>
                <td>{{ varient.stock }} Units</td>
                <td><a href="{% url 'editVarient' varient.id %}"><i class="bi bi-pencil-fill"></i></a></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </section>
    {% include 'messages.html' %}
  </main>

  <script>
    function filterProduct() {
      let input = document.getElementById("searchVarients").value.toUpperCase();
      let rows = document.getElementById("varientsTable").getElementsByTagName("tr");
  
      for (let i = 0; i < rows.length; i++) {
        let priceCell = rows[i].getElementsByTagName("td")[1];
        if (priceCell) {
          let priceText = priceCell.textContent || priceCell.innerText;
          if (priceText.toUpperCase().indexOf(input) > -1) {
            rows[i].style.display = "";
          } else {
            rows[i].style.display = "none";
          }
        } 
      }
    }
  </script>
{% endblock %}
